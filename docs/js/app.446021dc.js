(function(e){function _(_){for(var s,n,o=_[0],c=_[1],i=_[2],u=0,d=[];u<o.length;u++)n=o[u],Object.prototype.hasOwnProperty.call(a,n)&&a[n]&&d.push(a[n][0]),a[n]=0;for(s in c)Object.prototype.hasOwnProperty.call(c,s)&&(e[s]=c[s]);l&&l(_);while(d.length)d.shift()();return r.push.apply(r,i||[]),t()}function t(){for(var e,_=0;_<r.length;_++){for(var t=r[_],s=!0,o=1;o<t.length;o++){var c=t[o];0!==a[c]&&(s=!1)}s&&(r.splice(_--,1),e=n(n.s=t[0]))}return e}var s={},a={app:0},r=[];function n(_){if(s[_])return s[_].exports;var t=s[_]={i:_,l:!1,exports:{}};return e[_].call(t.exports,t,t.exports,n),t.l=!0,t.exports}n.m=e,n.c=s,n.d=function(e,_,t){n.o(e,_)||Object.defineProperty(e,_,{enumerable:!0,get:t})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,_){if(1&_&&(e=n(e)),8&_)return e;if(4&_&&"object"===typeof e&&e&&e.__esModule)return e;var t=Object.create(null);if(n.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:e}),2&_&&"string"!=typeof e)for(var s in e)n.d(t,s,function(_){return e[_]}.bind(null,s));return t},n.n=function(e){var _=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(_,"a",_),_},n.o=function(e,_){return Object.prototype.hasOwnProperty.call(e,_)},n.p="";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=_,o=o.slice();for(var i=0;i<o.length;i++)_(o[i]);var l=c;r.push([0,"chunk-vendors"]),t()})({0:function(e,_,t){e.exports=t("56d7")},2395:function(e,_,t){},"398e":function(e,_,t){},"56d7":function(e,_,t){"use strict";t.r(_);t("e260"),t("e6cf"),t("cca6"),t("a79d");var s=t("2b0e"),a=function(){var e=this,_=e.$createElement,t=e._self._c||_;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},r=[],n={name:"App",components:{}},o=n,c=(t("7c55"),t("2877")),i=Object(c["a"])(o,a,r,!1,null,null,null),l=i.exports,u=t("5c96"),d=t.n(u),p=(t("0fae"),t("e29a"),t("8c4f")),f=function(){var e=this,_=e.$createElement,t=e._self._c||_;return t("div",{staticClass:"main"},[t("div",{staticClass:"menu-container"},[t("setting-menu")],1),t("div",{staticClass:"content-container"},[e.caseUpload&&e.picUpload?t("case-module",{attrs:{caseData:e.caseData}}):e._e()],1)])},E=[],m=function(){var e=this,_=e.$createElement,t=e._self._c||_;return t("div",{staticClass:"nav-bar"},[t("i",{staticClass:"iconfont iconzhilingpeizhi"}),t("ul",{staticClass:"menu"},[t("li",[t("el-upload",{staticClass:"upload-demo",attrs:{action:"","auto-upload":!1,"show-file-list":!1,"on-change":e.importExcel}},[t("a",{attrs:{title:"导入配置"}},[t("i",{staticClass:"iconfont iconwenben"})])])],1),t("li",[t("el-upload",{attrs:{action:"","on-change":e.importPic,"auto-upload":!1,"show-file-list":!1,multiple:!0}},[t("a",{attrs:{href:"javascript:void(0)",title:"导入图片"}},[t("i",{staticClass:"iconfont icontupian"})])])],1),e._m(0),e._m(1)])])},h=[function(){var e=this,_=e.$createElement,t=e._self._c||_;return t("li",[t("a",{attrs:{href:"javascript:void(0)",title:"导入音频"}},[t("i",{staticClass:"iconfont iconyinle"})])])},function(){var e=this,_=e.$createElement,t=e._self._c||_;return t("li",[t("a",{attrs:{href:"javascript:void(0)"}})])}],D={name:"menu",methods:{importExcel:function(e){this.$parent.handlePreview(e)},importPic:function(e){this.$parent.handlePicPreview(e)}}},P=D,v=(t("f004"),Object(c["a"])(P,m,h,!1,null,"7e6446ac",null)),b=v.exports,O=t("9ae0"),j=function(){var e=this,_=e.$createElement,t=e._self._c||_;return t("div",{staticClass:"full"},[e._l(e.caseData,(function(_,s){return[t("div",{directives:[{name:"show",rawName:"v-show",value:s===e.sceneIndex,expression:"index === sceneIndex"}],key:"scene"+s,staticClass:"full"},[t("img",{staticClass:"bg",attrs:{src:_.background,alt:""},on:{click:function(_){return e.handleScene(e.vm)}}}),t("div",{staticClass:"dialog"},["对话"===_.type?t("div",{on:{click:function(_){return e.handleScene(e.vm)}}},[e._l(_.text,(function(s,a){return[t("p",{directives:[{name:"show",rawName:"v-show",value:s.show,expression:"t.show"}],key:"text"+a,staticClass:"dialog-text"},[t("span",{staticClass:"name"},[e._v(e._s(_.pep[a]))]),t("span",[e._v(e._s(":"+s.value))])])]}))],2):e._e(),"问题"===_.type?t("div",[t("div",{staticClass:"dialog-text"},[t("div",{staticClass:"name"},[e._v(e._s(_.pep[0]))]),t("div",{staticClass:"dialog-question"},[e._v(" "+e._s(e.formatQuestion(_.text[0].value).question)+" ")]),t("div",{staticClass:"choices"},e._l(e.formatQuestion(_.text[0].value).answer,(function(s,a){return t("div",{key:"answer"+a,staticClass:"choice-item",on:{click:function(t){return e.handleAnswer(_,s,e.vm)}}},[e._v(" "+e._s(s)+" ")])})),0)])]):e._e()]),e._l(_.portrait,(function(s,a){return[t("img",{directives:[{name:"show",rawName:"v-show",value:s.show,expression:"p.show"}],key:"pic"+a,staticClass:"pep",class:[e.getPos(_.portraitPos[a]),_.size[a]],attrs:{src:s.value,alt:""}})]}))],2)]})),t("el-dialog",{attrs:{visible:e.dialogVisible,center:"",width:"30%"},on:{"update:visible":function(_){e.dialogVisible=_}}},[t("span",[e._v(e._s(e.correct?"恭喜你答对了！":"很遗憾答错了"))]),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e.correct?t("el-button",{attrs:{type:"primary"},on:{click:e.goOn}},[e._v("确 定")]):t("el-button",{attrs:{type:"primary"},on:{click:function(_){e.dialogVisible=!1}}},[e._v("继续回答")])],1)])],2)},M=[],w=t("5748"),x=w["a"],g=(t("f243"),Object(c["a"])(x,j,M,!1,null,"a164a8ce",null)),C=g.exports,k={name:"home",components:{settingMenu:b,caseModule:C},data:function(){return{caseIndex:0,excelData:[],caseData:[],imgData:[],caseUpload:!1,picUpload:!1,flag:!1}},methods:{handlePreview:function(e){O["a"].readExcel(e,this)},handlePicPreview:function(e){var _=this;this.flag||(this.flag=!0,setTimeout((function(){_.picUpload=!0}),1e3)),O["a"].readPic(e,this)},switchCase:function(){this.caseUpload=!1,this.picUpload=!1,this.caseIndex++,O["a"].makeCase(this),O["a"].matchImg(this)}}},I=k,U=(t("b924"),Object(c["a"])(I,f,E,!1,null,"70dfabfa",null)),A=U.exports;s["default"].use(p["a"]);var T=[{path:"/",redirect:"home"},{path:"/home",name:"home",component:A}],R=new p["a"]({routes:T}),W=R;s["default"].use(d.a),new s["default"]({router:W,render:function(e){return e(l)}}).$mount("#app")},5748:function(module,__webpack_exports__,__webpack_require__){"use strict";var _utils_home__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("9ae0");__webpack_exports__["a"]={name:"case-module",props:["caseData"],data:function(){return{index:0,sceneIndex:0,stop:!1,forMatQuestion:_utils_home__WEBPACK_IMPORTED_MODULE_0__["b"],handleScene:_utils_home__WEBPACK_IMPORTED_MODULE_0__["d"],handleAnswer:_utils_home__WEBPACK_IMPORTED_MODULE_0__["c"],vm:this,correct:!1,dialogVisible:!1}},created:function(){console.log(this.caseData),Object(_utils_home__WEBPACK_IMPORTED_MODULE_0__["e"])(this)},methods:{getPos:function(e){return"left"===e?"pep-left":"right"===e?"pep-right":""},formatQuestion:function formatQuestion(str){return eval("("+str+")")},goOn:function(){this.dialogVisible=!1,Object(_utils_home__WEBPACK_IMPORTED_MODULE_0__["d"])(this),this.correct=!1}}}},"7c55":function(e,_,t){"use strict";t("2395")},"9ae0":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"b",(function(){return forMatQuestion})),__webpack_require__.d(__webpack_exports__,"d",(function(){return handleScene})),__webpack_require__.d(__webpack_exports__,"e",(function(){return refresh})),__webpack_require__.d(__webpack_exports__,"c",(function(){return handleAnswer}));var D_WebStormWorkspace_scene_teaching_node_modules_babel_runtime_helpers_esm_toConsumableArray_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("2909"),core_js_modules_es_array_slice_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("fb6a"),core_js_modules_es_array_slice_js__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(core_js_modules_es_array_slice_js__WEBPACK_IMPORTED_MODULE_1__),core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("d3b7"),core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_2__),core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("159b"),core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_3__),core_js_modules_es_object_keys_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("b64b"),core_js_modules_es_object_keys_js__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(core_js_modules_es_object_keys_js__WEBPACK_IMPORTED_MODULE_4__),core_js_modules_es_regexp_constructor_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("4d63"),core_js_modules_es_regexp_constructor_js__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(core_js_modules_es_regexp_constructor_js__WEBPACK_IMPORTED_MODULE_5__),core_js_modules_es_regexp_dot_all_js__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("c607"),core_js_modules_es_regexp_dot_all_js__WEBPACK_IMPORTED_MODULE_6___default=__webpack_require__.n(core_js_modules_es_regexp_dot_all_js__WEBPACK_IMPORTED_MODULE_6__),core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("ac1f"),core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_7___default=__webpack_require__.n(core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_7__),core_js_modules_es_regexp_sticky_js__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("2c3e"),core_js_modules_es_regexp_sticky_js__WEBPACK_IMPORTED_MODULE_8___default=__webpack_require__.n(core_js_modules_es_regexp_sticky_js__WEBPACK_IMPORTED_MODULE_8__),core_js_modules_es_regexp_to_string_js__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("25f0"),core_js_modules_es_regexp_to_string_js__WEBPACK_IMPORTED_MODULE_9___default=__webpack_require__.n(core_js_modules_es_regexp_to_string_js__WEBPACK_IMPORTED_MODULE_9__),core_js_modules_es_string_match_js__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("466d"),core_js_modules_es_string_match_js__WEBPACK_IMPORTED_MODULE_10___default=__webpack_require__.n(core_js_modules_es_string_match_js__WEBPACK_IMPORTED_MODULE_10__),core_js_modules_es_string_split_js__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("1276"),core_js_modules_es_string_split_js__WEBPACK_IMPORTED_MODULE_11___default=__webpack_require__.n(core_js_modules_es_string_split_js__WEBPACK_IMPORTED_MODULE_11__),core_js_modules_es_function_name_js__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("b0c0"),core_js_modules_es_function_name_js__WEBPACK_IMPORTED_MODULE_12___default=__webpack_require__.n(core_js_modules_es_function_name_js__WEBPACK_IMPORTED_MODULE_12__),core_js_modules_es_array_concat_js__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("99af"),core_js_modules_es_array_concat_js__WEBPACK_IMPORTED_MODULE_13___default=__webpack_require__.n(core_js_modules_es_array_concat_js__WEBPACK_IMPORTED_MODULE_13__),xlsx__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__("25ca");function reset(e){e.caseIndex=0,e.excelData=[],e.imgData=[],e.caseUpload=!1,e.picUpload=!1,e.flag=!1}function makeCase(e){if(e.caseData=[],!e.excelData[e.caseIndex])return alert("没有更多案例了"),void reset(e);var _=e.excelData[e.caseIndex],t=Object(D_WebStormWorkspace_scene_teaching_node_modules_babel_runtime_helpers_esm_toConsumableArray_js__WEBPACK_IMPORTED_MODULE_0__["a"])(_.sheet);t=t.slice(10);var s={background:"",pep:[],text:[],portrait:[],size:[],portraitPos:[],type:""};t.forEach((function(_){if(-1!==_.indexOf("&"))return e.caseData.push(s),void(s={background:"",pep:[],text:[],size:[],portrait:[],portraitPos:[],type:""});var t={A:"pep",B:"text",T:"portrait",U:"portraitPos",X:"background",V:"size",Y:"type"};Object.keys(t).forEach((function(e){var a=new RegExp("["+e+"][0-9]+\\=","g");if(_.match(a))try{var r=_.split("=")[1];if(-1!==r.indexOf("'")&&(r=r.slice(1)),"X"===e||"Y"===e)return void(s[t[e]]=r);if("B"===e||"T"===e)return void s[t[e]].push({value:r,show:!1});s[t[e]].push(r)}catch(n){console.error(n)}}))})),e.caseUpload=!0,console.log(e.caseData)}function readExcel(e,_){var t=e.name.split(".")[1],s=["xlsx","xlc","xlm","xls","xlt","xlw","csv"].some((function(e){return e===t}));s?new Promise((function(_,t){var s=new FileReader;s.onload=function(e){var t=this,s=e.target.result;this.wb=xlsx__WEBPACK_IMPORTED_MODULE_14__["a"](s,{type:"binary"});var a=[];this.wb.SheetNames.forEach((function(e){a.push({sheetName:e,sheet:xlsx__WEBPACK_IMPORTED_MODULE_14__["b"].sheet_to_formulae(t.wb.Sheets[e])})})),_(a)},s.readAsBinaryString(e.raw)})).then((function(e){e&&e.length>0&&(_.excelData=e,0!==e.length&&makeCase(_))})):alert("文件格式错误！请重新选择")}function readPic(e,_){var t=e.name.split(".")[0];new Promise((function(_){var t=new FileReader;t.onload=function(e){_(e.target.result)},t.readAsDataURL(e.raw)})).then((function(e){_.imgData.push({picName:t,url:e}),_.caseData.forEach((function(_){_.background===t&&(_["background"]=e),_["portrait"].forEach((function(s,a){s.value===t&&(_["portrait"][a]["value"]=e)}))}))}))}function matchImg(e){e.caseData.forEach((function(_){e.imgData.forEach((function(e){_.background===e.picName&&(_["background"]=e.url),_["portrait"].forEach((function(t,s){t.value===e.picName&&(_["portrait"][s]["value"]=e.url)}))}))})),setTimeout((function(){e.picUpload=!0}),500)}function forMatQuestion(scene,vm){var json=eval("("+scene.text[0].value+")");console.log(json);var name="<div class='name'>".concat(scene.pep[0],"</div>"),question='<div class="dialog-question">'.concat(json.question,"</div>"),option='<div class="choices">';try{json.answer.forEach((function(e){option+='<div class="choice-item" @click.stop="'.concat((function(){vm.handleAnswer(vm)}),'">').concat(e,"</div>")}))}catch(e){console.error(e)}return option+="<div>",name+question+option}function handleScene(e){if(!e.stop&&e.sceneIndex<=e.caseData.length-1){if(e.index<e.caseData[e.sceneIndex].text.length-1)e.index++;else if(e.index=0,e.sceneIndex++,e.sceneIndex===e.caseData.length)return e.sceneIndex=0,e.index=0,void e.$parent.switchCase();refresh(e)}}function refresh(e){e.caseData[e.sceneIndex].text.forEach((function(_,t){_.show=t===e.index})),e.caseData[e.sceneIndex].portrait.forEach((function(_,t){_.show=t===e.index}))}function handleAnswer(scene,sel,vm){var json=eval("("+scene.text[0].value+")");vm.correct=sel===json.rightAnswer,vm.dialogVisible=!0}__webpack_exports__["a"]={readExcel:readExcel,readPic:readPic,matchImg:matchImg,makeCase:makeCase,forMatQuestion:forMatQuestion}},b924:function(e,_,t){"use strict";t("e206")},d48f:function(e,_,t){},e206:function(e,_,t){},e29a:function(e,_,t){},f004:function(e,_,t){"use strict";t("398e")},f243:function(e,_,t){"use strict";t("d48f")}});
//# sourceMappingURL=app.446021dc.js.map